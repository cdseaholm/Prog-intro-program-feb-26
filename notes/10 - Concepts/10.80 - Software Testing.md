# Software Testing


## Setting up

- Testing is another "Project" under your Solution you can add by right clicking the solution->Add->New Project-> The one we used is xUnit Test Project->Name it and create.

- NuGet packages typical in this class:
    1. Coverlet.collection...
    2. Microsoft.NET...
    3. NSubstitute (May have to download this one)
    4. xunit
    5. xunit.runner

## Running

### Example 1-TestDouble

- Open your .Domain folder (might be called something else but it's the other main folder aside from .Tests. In this example it's Banking.Domain in Banking Solution)

- You'll need to create functions to test, place them here:

    - Exmaple from Banking.Domain/StandardBonusCalculator:

```


namespace Banking.Domain;

public interface ICalculateBonusesForAccounts
{
    decimal CalculateBonusForDeposit(decimal currentBalance, decimal depositAmount);
}

public class StandardBonusCalculator : ICalculateBonusesForAccounts
{
    public decimal CalculateBonusForDeposit(decimal currentBalance, decimal depositAmount)
    {
        return currentBalance >= 5000M ? depositAmount * .08M : 0;
    }

    public void DoSomething() { }
}

public class SuperDeluxBonusCalculator : ICalculateBonusesForAccounts
{
    public decimal CalculateBonusForDeposit(decimal currentBalance, decimal depositAmount)
    {
        return currentBalance >= 5000M ? depositAmount * .08M : 0;
    }

    public void OtherStuff() { }
}

```

- And here is a TestDouble associated with this:

    - Example from Banking.Tests/TestDoubles/StubbedBonusCalculator.cs: 

```
namespace Banking.Tests.TestDoubles;

public class StubbedBonusCalculator : ICalculateBonusesForAccounts
{
    public decimal CalculateBonusForDeposit(decimal currentBalance, decimal depositAmount)
    {
        if (currentBalance == 5000M && depositAmount == 420.69M)
        {
            return 19M;
        }
        else
        {
            return 0;
        }
    }
}

public class SuperExplodingBonusCalculator : ICalculateBonusesForAccounts
{
    public decimal CalculateBonusForDeposit(decimal currentBalance, decimal depositAmount)
    {
        throw new Exception();
    }
}

```


## General

    - Unit Test file: ./TestFolderName.Tests/UnitTest.cs:
    src\week1\BankingSolution\Banking.Tests\UnitTest1.cs

        - In here you write (public void-generally?) functions that use "Assert.Equal(expected, answer);"
        - To add params, you can use "[Theory]\n[InlineData(3,3,6)]" So that 3 and 3 are your params and 6 is your expected
        - You can use fact for void/non-param functions/etc to make sure it doesn't break
        - Example:

        ```
        public class UnitTest1
        {
            [Fact]
            public void CanAddTenAndTwenty()
            {
                // Arrage - Given
                int a = 10;
                int b = 20;
                int answer;

                // Act - When
                answer = a + b;
                // Assert - Then 
                Assert.Equal(30, answer);
            }

            [Theory]
            [InlineData(10,20,30)]
            [InlineData(2,2,4)]
            [InlineData(3,3,6)]
            public void CanAddOtherIntegersToo(int a, int b, int expected)
            {

                int answer = a + b;
                Assert.Equal(expected, answer);
            }
        }

        ```

        2. Above example doesn't use Function from externals that you may truly be using.
            
            - For this, you'd just import the function and use it within the test function and return the vals it returns or not
