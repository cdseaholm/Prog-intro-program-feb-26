# State

Using this for signals since it's kinda a state

Reminds me of a mixture of useState from React and Zustand (global states)

1. @ngrx/store
    - kind of like zustand for angular
2. ng-redux
    - Wrapper around redux for angular
3. [@ngrx/signal-store](https://ngrx.io)
    - library for managing state
    - what we are using


## Signals

- import {signal} from '@angular/core';

- then in your export class, you can set a variable to a signal value like:
    signal(42)

- From here, you can use this variable as text in an element as:
    {{current()}} or use it in a function
    - Example:

    ```
        import { Component, ChangeDetectionStrategy, signal } from '@angular/core';

        @Component({
            selector: 'app-basics-signals',
            changeDetection: ChangeDetectionStrategy.OnPush,
            imports: [],
            template: `
                <div class="flex flex-row p-8 gap-4">
                <button class="btn btn-sm btn-warning btn-circle" (click)="decrement()">-</button>
                <span class="mx-2">{{ current() }}</span>
                <button class="btn btn-sm btn-primary btn-circle" (click)="increment()">+</button>
                <button class="btn btn-sm btn-secondary" (click)="current.set(0)">Reset</button>
                </div>
            `,
            styles: ``,
        })
        export class SignalsPage {
            current = signal(0);

            increment() {
                this.current.update((oldVal) => oldVal + 1);
            }

            decrement() {
                this.current.update((oldVal) => oldVal - 1);
            }
        }
        
    ```

## Global Store (think zustand) using @ngrx/signals

1. Create a store
    - withState for states
    - withMethods for functions/methods
        - withMethods needs "patchState()" prefix
    - withComputed for computed/effect like states
        - withComputed needs "computed()" prefix
2. Add providers to your basic.routes.ts with the store within the array
3. Now in a page components export class, use "store = Inject(Store);

- Injected and Providers Ex:

```
export const BasicsRoutes: Routes = [
  {
    path: '',
    component: Home,
    providers: [CounterStore],
    ....
```

```
    export class SignalsPage {
        store = Inject(signalStore);
        ...
    }

```


- Store ex: 

```
    import { signalStore, withState } from '@ngrx/signals';

    type CounterState = {
        current: number;
        magic: boolean;
    };

    export const CounterStore = signalStore(
    withState<CounterState>({
        current: 0,
        magic: false,
    }),
    withMethods((store) => {
        return (
            increment: () => patchState(store, {current: store.current + 1 }),
            decrement: () => patchState(store, {current: store.current - 1}),
            reset: () => patchState(store, {current: 0})
        )
    }),
    withComputed((store) => {
        return (
            resetShouldBeDisabled: computed(() => store.current === 0),
            fizzBuzz: computed(() => {
                const c = store.current();
                if (c === 0) {
                    return "nada";
                }
                if (c % 3 === 0 && c % 5 === 0) {
                    return "fizzbuzz";
                } else if (c % 3 === 0) {
                    return "fizz";
                } else if (c % 5 === 0) {
                    return "buzz";
                } else {
                    return "nada";
                }
            })
        )
    })
    );
```
